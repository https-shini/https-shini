name: ðŸŽµ Spotify Now Playing

on:
  schedule:
    - cron: "*/30 * * * *" # atualiza a cada 30 minutos
  workflow_dispatch:

jobs:
  update-spotify:
    name: Atualizar mÃºsica no README
    runs-on: ubuntu-latest

    permissions:
      contents: write

    steps:
      - name: ðŸ“¥ Checkout do repositÃ³rio
        uses: actions/checkout@v4

      - name: ðŸŽµ Atualizar Spotify no README
        uses: novatorem/spotify-github-profile@master
        env:
          SPOTIFY_CLIENT_ID: ${{ secrets.SPOTIFY_CLIENT_ID }}
          SPOTIFY_CLIENT_SECRET: ${{ secrets.SPOTIFY_CLIENT_SECRET }}
          SPOTIFY_REFRESH_TOKEN: ${{ secrets.SPOTIFY_REFRESH_TOKEN }}

      - name: ðŸ’¾ Commit das mudanÃ§as
        uses: EndBug/add-and-commit@v9
        with:
          message: "ðŸŽµ Atualizando mÃºsica atual do Spotify"
          add: "."
          default_author: github_actions
